<div class="dashboard-container">
  <div class="welcome-card">
    <h2>Â¡Bienvenido a Desguaces Borox!</h2>
    <p>Has iniciado sesiÃ³n correctamente en el sistema de subastas de vehÃ­culos.</p>
    <p>Explora las pujas activas y participa en las subastas de automÃ³viles.</p>
  </div>

  @if (esAdmin()) {
    <div class="admin-section">
      <h3>ğŸ”§ Panel de AdministraciÃ³n</h3>
      
      @if (mensajeProceso()) {
        <div class="alert" [class.success]="mensajeProceso()?.includes('correctamente')">
          {{ mensajeProceso() }}
        </div>
      }

      <button 
        class="btn-admin" 
        (click)="procesarSubastasFinalizadas()"
        [disabled]="procesandoNotificaciones()"
      >
        @if (procesandoNotificaciones()) {
          <span class="spinner"></span>
          <span>Procesando...</span>
        } @else {
          <span>ğŸ””</span>
          <span>Procesar Subastas Finalizadas</span>
        }
      </button>
      <p class="help-text">Genera notificaciones para los ganadores de subastas finalizadas</p>
    </div>
  }

  <div class="cards-grid">
    <div class="info-card">
      <div class="card-icon">ğŸ†</div>
      <h3>Subastas Ganadas</h3>
      <p class="card-number">{{ subastasGanadas() }}</p>
      @if (subastasGanadas() > 0) {
        <div class="card-list">
          @for (puja of pujasGanadas(); track puja.idPuja) {
            <div class="mini-item clickable" (click)="verSubasta(puja.idSubasta)">
              <span class="mini-icon">ğŸš—</span>
              <span class="mini-text">Subasta #{{ puja.idSubasta }}</span>
            </div>
          }
        </div>
      }
    </div>

    <div class="info-card">
      <div class="card-icon">ğŸ“Š</div>
      <h3>Subastas Participadas</h3>
      <p class="card-number">{{ subastasParticipadas() }}</p>
      @if (subastasParticipadas() > 0) {
        <div class="card-list">
          @for (subasta of subastasUnicasParticipadas().slice(0, 5); track subasta.idSubasta) {
            <div class="mini-item clickable" (click)="verSubasta(subasta.idSubasta)">
              <span class="mini-icon">ğŸ”¥</span>
              <span class="mini-text">Subasta #{{ subasta.idSubasta }}</span>
              <span class="puja-count">{{ subasta.totalPujas }}</span>
            </div>
          }
        </div>
      }
    </div>

    <div class="info-card">
      <div class="card-icon">â°</div>
      <h3>PrÃ³ximas a Finalizar</h3>
      <p class="card-number">{{ proximasAFinalizar() }}</p>
      <p class="card-subtitle">< 24 horas</p>
      @if (proximasAFinalizar() > 0) {
        <div class="card-list">
          @for (subasta of subastasProximas(); track subasta.idSubasta) {
            <div class="mini-item clickable" (click)="verSubasta(subasta.idSubasta)">
              <span class="mini-icon">ğŸ”¥</span>
              <span class="mini-text">{{ subasta.vehiculo?.marca }} {{ subasta.vehiculo?.modelo }}</span>
              @if (usuarioHaPujado(subasta.idSubasta)) {
                <span class="puja-badge">âœ“</span>
              }
            </div>
          }
        </div>
      }
    </div>
  </div>

  <!-- Acciones principales -->
  <div class="actions-section">
    <a routerLink="/subastas" class="action-button primary">
      <div class="action-icon">ğŸš—</div>
      <div class="action-content">
        <h3>Ver todas las subastas</h3>
        <p>Explora todos los vehÃ­culos disponibles y participa en las pujas activas</p>
      </div>
      <div class="action-arrow">â†’</div>
    </a>

    <a routerLink="/mis-pujas" class="action-button secondary">
      <div class="action-icon">ğŸ’°</div>
      <div class="action-content">
        <h3>Ver mis pujas</h3>
        <p>Consulta el estado de tus ofertas y vehÃ­culos de interÃ©s</p>
      </div>
      <div class="action-arrow">â†’</div>
    </a>
  </div>
</div>
